# K_W_7 and K_W_8 

Скачайте в домашнюю директорию, создайте виртуальное окружение и активируйте. Установите зависимости командой.
Создайте миграции. Создайте Базу Данных. В базу данных Пользователей вносите ваш username в Telegram.
Заполните в созданном файле '.env' строчки по шаблону файла '.env.local'

Интеграция с Telegram
Для создания Telegram-бота найдите в чате самого главного бота: BotFather
Далее следуйте инструкциям и по завершении создания бота вам будет выдан токен. 
Его необходимо перенести в файл .env в поле TELEGRAM_API_TOKEN.
Пример: '8831143924:AAF1LbOy3IctI0vqbRIW2delvn6F5DKnPh6'
(необходимо зайти в файл K_W_7/habit_app/telegram.py и запустить его. Переходите в Telegram-бота и 
нажмите на команду /info. Внесите предоставленный Chat_ID в базу данных в соответствующее поле для того 
пользователя Telegram, с которого вы нажимали на кнопку /info.

Работа программы
Авторизуйтесь, наполните БД, но соблюдайте следующее:
  - У привычки не может быть связанной привычки и вознаграждения.
  - У приятной привычки не может ни вознаграждения, ни связанной привычки.
  - Связанной привычкой может быть только приятная привычки.
  - Время выполнения должно быть не больше 120 секунд.
  - Периодичность выполнения должно быть не реже, чем 1 раз в 7 дней.
Запустите Redis, выполнив команду:
'sudo service redis-server start'
Откройте дополнительное окно терминала и выполните команду:
'celery -A config worker -l INFO -P eventlet'
Откройте дополнительное окно терминала и выполните команду:
'celery -A config beat -l INFO'
Запустите сервис командой:
MacOS / Linux:
'python3 manage.py runserver'

Завершение работы
Для остановки работы сервера используйте комбинацию клавиш 'Ctrl+C' в окне терминала, где он был запущен.
Для остановки работы Celery также используйте 'Ctrl+C' в окнах терминала, где запущены команды.
Для остановки работы сервера Redis используйте команду: 'sudo service redis-server stop'

Покрытие тестами-83%
Документация доступна http://127.0.0.1:8000/docs/
Если не удается проверить покрытие тестами или запустить программу, необходимо закомментировать в 
settings.py настройки CORS и CSRF.


Docker: запуск
Для запуска контейнеров в фоновом режиме выполните команду:
docker-compose up -d --build

